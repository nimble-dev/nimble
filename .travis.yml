language: r

sudo: required

warnings_are_errors: true

notifications:
  email:
    recipients:
      - dbt1@williams.edu
    on_success: always
    on_failure: always

branches:
  only:
    - devel

r_packages:
  - igraph
  - coda
  - testthat
  - mvtnorm  # needed for test-distributions.R
  - abind    # needed for test-compareMCMCs.R
  - covr     # needed for code coverage reports

install:
  - R CMD build packages/nimble
  - R CMD INSTALL packages/nimble

script: ./run_tests.R

after_success:
  - Rscript -e 'library(covr); if(R.version$os == "linux-gnu") codecov()'
